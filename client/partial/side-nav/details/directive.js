'use strict';

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
define(['app/module', 'chroma', 'lodash'], function (app, color, _) {
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


	app.directive('amyEntityDetails', [function () {
		return {
			restrict   : 'E',
			replace    : true,
			templateUrl: 'partial/side-nav/details/view.html',
			require    : '?ngModel',
			scope      : true,

			compile: function () {
				return {

					pre: function preLink($scope, iElement, iAttrs, ngModel) {
						ngModel.$render = function () {
							$scope.tile = ngModel.$modelValue;
							iElement.putCSS($scope.tile.styling.focus.css);
							iElement.css(
									'backgroundColor',
									color($scope.tile.styling.normal.css['&'].backgroundColor).brighten(30).css()
							);
						};
					}

				};
			}
		};
	}]);


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
});/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
