'use strict';

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
define(['app/module', '$bind/service'], function (ApiNATOMY) {
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


	//// expects urls of dark (black) icons for active and inactive state

	ApiNATOMY.directive('iconBtn', ['$bind', function ($bind) {
		return {
			restrict:    'E',
			scope:       {
				ngModel:      '=',
				activeIcon:   '@',
				inactiveIcon: '@'
			},
			link:        function ($scope, iElement) {
				$scope.$watch('ngModel', function (newNgModel) {
					iElement.toggleClass('iconBtnActive', newNgModel);
					iElement.css(
							'backgroundImage',
							'url(' + (newNgModel ? $scope.activeIcon : $scope.inactiveIcon) + ')');
				});

				iElement.click($bind(function (event) {
					event.stopPropagation();
					$scope.$eval('ngModel = !ngModel');
				}));
			}
		};
	}]);


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
});/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
